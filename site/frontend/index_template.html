<!DOCTYPE html>
<html>
<head>
    <title>Ninja VPN</title>
</head>
<body>

    <h1>Ninja VPN</h1>

    <form id="customConfiguration">
        <label for="action">Action:</label>
        <select id="action" name="action">
            <option value="deploy">Deploy</option>
            <option value="destroy">Destroy</option>
        </select><br><br>

        <label for="timezone">Timezone:</label>
        <select id="timezone" name="timezone">
            <option value='Europe/Moscow'>Europe/Moscow</option>
            <option value='America/Argentina/Buenos_Aires'>America/Argentina/Buenos_Aires</option>
            <option value='Atlantic/Azores'>Atlantic/Azores</option>
            <option value='Atlantic/Bermuda'>Atlantic/Bermuda</option>
            <option value='Atlantic/Canary'>Atlantic/Canary</option>
            <option value='Australia/ACT'>Australia/ACT</option>
            <option value='CET'>CET</option>
            <option value='CST6CDT'>CST6CDT</option>
            <option value='EET'>EET</option>
            <option value='EST'>EST</option>
            <option value='Etc/Greenwich'>Etc/Greenwich</option>
            <option value='Europe/Madrid'>Europe/Madrid</option>
            <option value='GMT'>GMT</option>
            <option value='HST'>HST</option>
            <option value='MST'>MST</option>
            <option value='PST8PDT'>PST8PDT</option>
            <option value='Pacific/Fiji'>Pacific/Fiji</option>
            <option value='Pacific/Samoa'>Pacific/Samoa</option>
            <option value='US/Alaska'>US/Alaska</option>
            <option value='UTC'>UTC</option>
        </select><br><br>

        <label for="countdown_digit">Number:</label>
        <input type="text" id="countdown_digit" name="countdown_digit"><br><br>

        <label for="time_frame">Time:</label>
        <select id="time_frame" name="time_frame">
            <option value="minutes">minutes</option>
            <option value="hours">hours</option>
        </select><br><br>

        <label for="aws_region">Region:</label>
        <select id="aws_region" name="aws_region">
            <option value="us-east-1">US | North Virginia</option>
            <option value="us-east-2">US | Ohio</option>
            <option value="us-west-1">US | North california</option>
            <option value="us-west-2">US | Oregon</option>
            <option value="ca-central-1">CA | Canada (Central)</option>
            <option value="eu-north-1">EU | Stockholm</option>
            <option value="eu-west-1">EU | Ireland</option>
            <option value="eu-west-2">EU | London</option>
            <option value="eu-west-3">EU | Paris</option>
            <option value="eu-central-1">EU | Frankfurt</option>
            <option value="eu-south-1">EU | Milan</option>
            <option value="af-south-1">AF | Cape Town</option>
            <option value="ap-northeast-1">AP | Tokio</option>
            <option value="ap-northeast-2">AP | Seoul</option>
            <option value="ap-northeast-3">AP | Osaka</option>
            <option value="ap-southeast-1">AP | Singapore</option>
            <option value="ap-southeast-2">AP | Sydney</option>
            <option value="ap-east-1">AP | Hong Kong</option>
            <option value="ap-south-1">AP | Mumbai</option>
            <option value="me-south-1">ME | Barhain</option>
            <option value="sa-east-1">SA | Sao Paulo</option>
            <option value="ap-southeast-3">AP | Jakarta</option>
        </select><br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email"><br><br>

        <input type="button" id="submitBtn" value="Submit" onclick="submitForm(), this.disabled=true">
    </form>

    <div id="message"></div>

    <script>
        function submitForm() {
            var form = document.getElementById("customConfiguration");
            var formData = new FormData(form);

            var requestBody = {};
            requestBody['action'] = formData.get('action');
            requestBody['email'] = formData.get('email');
            requestBody['timezone'] = formData.get('timezone');
            requestBody['region'] = formData.get('aws_region');
            requestBody['countdown'] = formData.get('countdown_digit') + ' ' + formData.get('time_frame');

            fetch('${api_gateway_url}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestBody),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                // Update the message element with a success message
                var messageElement = document.getElementById('message');
                messageElement.innerHTML = data.message;
            })
            .catch((error) => {
                console.error('Error:', error);
                // Update the message element with an error message
                var messageElement = document.getElementById('message');
                messageElement.innerHTML = 'An error occurred. Please try again later.';
            });
        }
    </script>

</body>
</html>
